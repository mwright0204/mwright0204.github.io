<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Matthew Wright's Website</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo"><strong>Portfolio</strong> Matthew Wright</a>
									<ul class="icons">
										<li><a href="#" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
									</ul>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>The Benin Bronze Experience</h1>

									</header>

									<p>
									The Benin Bronze Experience is a VR exploration into what it was like to be a bronze caster in the ancient Kingdom of Benin being developed by 33 Strong. In this project, I have worked mainly as a technical artist using my skill and knowledge in Unreal Engine 5, creating complicated game elements such as a moving liquid shader as the bronze is melted and poured, the animation for the tongs as well as VFX for the firepit.									</p>
									<p>
									Check out The Benin Bronze Experience: <a href ="https://33strong.itch.io/benin-bronze-experience">Click Me!</a>
									</p>
									<p>
									Check out 33 Strong: <a href ="https://uk.linkedin.com/company/33-strong">Click Me!</a>
									</p>
									<p>
										More Words
									</p>
									<hr class="major" />

									<h2>The Crucible</h2>
									<h4>Shaders and Effects</h4>
									<p>
The visuals of the crucible can be broken down into a few main elements: Pouring Bronze, Smoke Effects, the Glowing Crucible, and the Liquid Bronze.
	
									</p>
									<p>
The pouring bronze and smoke effects are both made through Unreal Engine's Niagara system, an advanced particle system created for UE 5. It enabled the ability to control flows of data into and out of the particle system, while remaining well optimised if used correctly. 

									</p>
									<p>
For the pouring bronze specifically, it was the combination of a sprite renderer and a ribbon renderer, allowing globs of molten bronze to pour but keeping a connection of bronze between them to give them a realistic feeling. Custom input data, such as the rate of the pour being based on the angle, makes the bronze pour feel more realistic, as well as having a velocity derived from the pour direction. This, combined with accurate drag, gravity, and collision with the ground, allows for a fluid and heavy feeling, resulting in our desired outcome.
									</p>
									<p>
When it comes to the smoke effects they were a combination of two sprite renders, one using a heat warping effect and the other using smoke sprites with a flipbook texture, together these have collision and inverted gravity to stop them going to walls and to rise at a consistent rate, the spawn rate is determined by a user parameter changes in the code base of the amount of bronze in the crucible.

									</p>
									<p>
The glowing crucible has a custom material, determining a lit PBR shader's look. It has two states: one being emissive and orange, based on some video references of bronze pouring, and the other is stone. A dynamic material parameter allows a linear interpolation between the two states, so it can change gradually via code.
									</p>
									<p>
Liquid Bronze was the hardest of all of these to create, having a shader that moves the liquid based on rotation, and also being able to lerp the amount based on melting bronze was a tall order, but with enough graft, I worked perfectly in the end. The basic principle for how it works is instead of working out where the liquid is, you work out where the liquid isnâ€™t, using the opacity of the material, essentially cutting out the bit you don't want. 

									</p>
									<p>
To find out the bit you don't want, I did a calculation to subtract the world position from the local object position to get the difference, and then added the bounds of the object. By multiplying the bounds by a normalized value, you can reduce and increase the liquid amount easily. By controlling this normalized value, we have created a close to realistic approach where the liquid amount decreases as the pour amount increases, all based on physical interaction.
									</p>
									<p>
										
										<br><br>
									</p>
									<h4>Programming and Math</h4>
									<p>
									The crucible programmatically has one element that stands out. The function to calculate the lowest edge when pouring is a simple concept, but in practice, it worked out to be more complex than initially thought.									</p>
									<p>
									To find the lowest edge of the crucible, first, we need to define where the edge of the crucible is, and to do that, we need to draw multiple points around the top of the crucible. We drew 8 points around the top; these points would update their Z coordinate in the world accordingly, and from then it is simply a question of checking all the points and figuring out which is the lowest in a loop.

									</p>
									<p>
									Due to the nature of how the code works, this edge point value stored is able to be used by a sphere trace collision, detecting what the molten bronze collides with. Robust code often does the opposite of tech debt, making life easier in the future.
									</p>
									<p>
									The other significant programmatic element of the crucible is the maths in order to make the pour feel regarding the angle required for molten bronze to pour out. If we were pouring in two dimensions, this job couldn't have been easier. We take whichever relevant rotational axis and have a condition based on requiring an exact degree, and call it a day. However, VR programming proved to be more complex yet again.

									</p>
									<p>
									To solve this, I did research, planned, and used trial and error, and eventually came to a solution. First, convert my rotation into a quaternion, to then translate it into an Euler representation in a 3D vector. This is now our rotation, but represented in a more useful format. I then get the up vector of the original rotator and subtract each 3D vector from each other. This gets the difference between our current rotation and the up vector. To get a usable angle, we then take the X and Y values from this as its own vector and get the vector length. This will give you specifically the angle of tilt regardless of the direction held in-game.

									</p>
<hr class="major" />

									<h2>The Tongs</h2>
									<p>

									The tongs in the Benin Bronze Experience could perhaps be the first working tongs created in VR and are done through a combination of procedural (inverse kinematic) animations and bespoke programming.
									</p>
									<h4>Control Rig</h4>
									<p>
									<img class="image right" src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExbHM0cG14N2JlNHl3OG5mcGF6YXc0MGRvb3VoY3V4NGlpYmF4N2lnNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/TnIq8CedmtEZjeWnLF/giphy.gif"></img>
										Procedural animation can be done in many different ways, but the requirements for this specific use case are unique. Because of the VR aspect of the game, the player's hands can rotate and move through space, and so we had to adjust for this. 

									</p>
									<p>

										Ultimately, traditional baked animations would not suffice; using aim constraints to animate each tong limb while keeping its fixed centre at a calculated point is the solution to the large amount of animation. But this will leave the limbs able to rotate independently, so it is important to lock the tongs' rotation on other irrelevant axes. To do this, you only allow rotation around the up vector of the tongs' root bone.

									</p>
									<p>
										Because of a discrepancy between the animation and player interaction there is still one issue. The control that commands the aim of the animation can move around freely, not fixed onto the tongs, which can cause glitches. So an extra control is added, a fixed control that will lock onto each handle spot, the freely moving control still exists to animate the main bones for the animation, but these fixed controls can act as reference points of the animation to reset to or for other utility required.

									</p>
									<h4>VR Player Programming</h4>
									<p>
In terms of the player programming for VR tongs, the first question is, how do you program a two-handed object? And how can the hands act independently but be connected by a hinge?
										</p>
										<p>
These were the questions we were asking ourselves when approaching this problem, but the solution I released was all too obvious. The solution was to treat both tong handles as independent objects in the grab code, so the player can hold both separately. And once both are held, we can calculate the position of the hinge of the tongs can be set according to both handle positions.
										</p>
										<p>
This approach worked in tandem with the procedural animations to create the start of our animated tongs. By this point, we had tongs you can grab and move through space with the animations working, but the tong limbs would rotate into each other if pushed too far, and invert if the other direction. To fix this, we needed some kind of clamp, but with our system working dynamically, we had no fixed metric to work from. What we needed was a way to calculate the exact angle the tongs were at.
										</p>
										<p>
To approximate an angle from the data available and to work in different scenarios was not easy, but the solution we ended up with was a complicated piece of maths using the distance between the tong handles. As the distance linearly increased with the angle of the tongs, we can use this to clamp our animation.
										</p>
										<p>
To make our tongs function with the crucible in the game, we used some overlap collision spheres at the end of the tongs, along with measuring how closed they are to attach the crucible to them.
										</p>
									<hr class="major" />
								</section>

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Search 
								<section id="search" class="alt">
									<form method="post" action="#">
										<input type="text" name="query" id="query" placeholder="Search" />
									</form>
								</section>-->

							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="index.html">Homepage</a></li>
										<li><a href="about.html">About</a></li>
										<!--<li><a href="elements.html">Elements</a></li> -->
										<li>
											<span class="opener">See Games</span>
											<ul>
												<li><a href="#">The Benin Bronze Experience</a></li>
												<li><a href="#">Pixelated Reverie</a></li>
												<li><a href="#">Foxen Island</a></li>
												<li><a href="#">FOQUES</a></li>
												<li><a href="#">Invision</a></li>
											</ul>
										</li>
										<!--<li><a href="#">Etiam Dolore</a></li>
										<li><a href="#">Adipiscing</a></li>
										<li>
											<span class="opener">Another Submenu</span>
											<ul>
												<li><a href="#">Lorem Dolor</a></li>
												<li><a href="#">Ipsum Adipiscing</a></li>
												<li><a href="#">Tempus Magna</a></li>
												<li><a href="#">Feugiat Veroeros</a></li>
											</ul>
										</li>
										<li><a href="#">Maximus Erat</a></li>
										<li><a href="#">Sapien Mauris</a></li>
										<li><a href="#">Amet Lacinia</a></li>-->
									</ul>
								</nav>

							<!-- Section
								<section>
									<header class="major">
										<h2>Blog Posts</h2>
									</header>
									<div class="mini-posts">
										<article>
											<a href="#" class="image"><img src="images/pic07.jpg" alt="" /></a>
											<p>Pixelated Reverie - A Technical Artist's Blog</p>
										</article>
										<article>
											<a href="#" class="image"><img src="images/pic08.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
										<article>
											<a href="#" class="image"><img src="images/pic09.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
									</div>
									<ul class="actions">
										<li><a href="#" class="button">More</a></li>
									</ul>
								</section> -->

							<!-- Section 
								<section>
									<header class="major">
										<h2>Get in touch</h2>
									</header>
									<p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus aliquam.</p>
									<ul class="contact">
										<li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>
										<li class="icon solid fa-phone">(000) 000-0000</li>
										<li class="icon solid fa-home">1234 Somewhere Road #8254<br />
										Nashville, TN 00000-0000</li>
									</ul>
								</section>-->

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">Matthew Wright. All rights reserved. </p>
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>